<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sam White">
<meta name="dcterms.date" content="2023-11-19">

<title>Symbiont Abundance Notebook - qPCR - Initial Primer Tests with Positive Control Serial Dilutions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Symbiont Abundance Notebook</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/JPGLABHOME/SymbID_protbleach" rel="" target="_blank">
 <span class="dropdown-text">Notebook repo</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/JPGLABHOME" rel="" target="_blank">
 <span class="dropdown-text">Lab GitHub</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://padilla-gaminolab.weebly.com/" rel="" target="_blank"><i class="bi bi-info-square" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../../index.xml" rel="" target=""><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-right">
      <h1 class="title">qPCR - Initial Primer Tests with Positive Control Serial Dilutions</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">qPCR</div>
                <div class="quarto-category">CFX Connect</div>
                <div class="quarto-category">2023</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Sam White </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 19, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#intro" id="toc-intro" class="nav-link active" data-scroll-target="#intro">Intro</a>
  <ul>
  <li><a href="#serial-dilutions" id="toc-serial-dilutions" class="nav-link" data-scroll-target="#serial-dilutions">Serial Dilutions</a>
  <ul>
  <li><a href="#samples-used" id="toc-samples-used" class="nav-link" data-scroll-target="#samples-used">Samples Used</a></li>
  <li><a href="#dilution-calculations" id="toc-dilution-calculations" class="nav-link" data-scroll-target="#dilution-calculations">Dilution Calculations</a></li>
  </ul></li>
  <li><a href="#qpcrs" id="toc-qpcrs" class="nav-link" data-scroll-target="#qpcrs">qPCRs</a>
  <ul>
  <li><a href="#qpcr-calculations-are-here" id="toc-qpcr-calculations-are-here" class="nav-link" data-scroll-target="#qpcr-calculations-are-here">qPCR calculations are here:</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a>
  <ul>
  <li><a href="#output-files" id="toc-output-files" class="nav-link" data-scroll-target="#output-files">Output files</a>
  <ul>
  <li><a href="#raw-qpcr-data-.pcrd-requires-cfx-maestro" id="toc-raw-qpcr-data-.pcrd-requires-cfx-maestro" class="nav-link" data-scroll-target="#raw-qpcr-data-.pcrd-requires-cfx-maestro">Raw qPCR data (<code>.pcrd</code>; Requires CFX Maestro):</a></li>
  <li><a href="#qpcr-data-csv" id="toc-qpcr-data-csv" class="nav-link" data-scroll-target="#qpcr-data-csv">qPCR data (CSV):</a></li>
  <li><a href="#qpcr-report-pdf" id="toc-qpcr-report-pdf" class="nav-link" data-scroll-target="#qpcr-report-pdf">qPCR Report (PDF):</a></li>
  </ul></li>
  <li><a href="#cact-amplification" id="toc-cact-amplification" class="nav-link" data-scroll-target="#cact-amplification">CAct Amplification</a></li>
  <li><a href="#dact-amplification" id="toc-dact-amplification" class="nav-link" data-scroll-target="#dact-amplification">DAct Amplification</a></li>
  <li><a href="#mcap_paxc-amplification" id="toc-mcap_paxc-amplification" class="nav-link" data-scroll-target="#mcap_paxc-amplification">Mcap_PaxC Amplification</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">SUMMARY</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-right" id="quarto-document-content">




<section id="intro" class="level1">
<h1>Intro</h1>
<p>After quantifying the DNA and awaiting a response on how to handle the lack of DNA in 20 of the samples, I decided to create a serial dilution of some pooled DNA and test the three primer sets. I’d like to get a sense for their specificity, as well as their sensitivity.</p>
<p>All primers had been previously ordered/prepped by Tanya Brown. It’s my understanding that all three primer set sequences have been taken directly from previously published articles. One caveat is that those articles used these primer sets along with a probe oligo. Due to costs/time, these qPCRs (and all subsequent qPCRs) were performed using SYBR green (i.e.&nbsp;no probe oligo).</p>
<ul>
<li>CAct (C symbiont) <span class="citation" data-cites="cunning2012">(<a href="#ref-cunning2012" role="doc-biblioref">Ross Cunning and Baker 2012</a>)</span></li>
<li>DAct (D symbiont) <span class="citation" data-cites="cunning2012">(<a href="#ref-cunning2012" role="doc-biblioref">Ross Cunning and Baker 2012</a>)</span></li>
<li>Mcap_PaxC <span class="citation" data-cites="cunning2016a">(<a href="#ref-cunning2016a" role="doc-biblioref">R. Cunning, Ritson-Williams, and Gates 2016</a>)</span></li>
</ul>
<section id="serial-dilutions" class="level2">
<h2 class="anchored" data-anchor-id="serial-dilutions">Serial Dilutions</h2>
<p>Created a 10ng/uL (10,000pg/uL) “stock” consisting of three samples, two non-bleached (NB) and one bleachd (B). Selected the following samples and pooled them in the following fashion:</p>
<section id="samples-used" class="level3">
<h3 class="anchored" data-anchor-id="samples-used">Samples Used</h3>
<table class="table">
<thead>
<tr class="header">
<th>SAMPLE</th>
<th>CONCENTRATION(ng/uL)</th>
<th>VOLUME_USED(uL)</th>
<th>DNA(ng)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>T4.M.41.NB</td>
<td>21.6</td>
<td>3</td>
<td>64.8</td>
</tr>
<tr class="even">
<td>T5.M.74.B</td>
<td>10.9</td>
<td>3</td>
<td>32.7</td>
</tr>
<tr class="odd">
<td>T4.M.10.NB</td>
<td>4.44</td>
<td>3</td>
<td>13.32</td>
</tr>
<tr class="even">
<td>TOTAL</td>
<td></td>
<td>9</td>
<td>110.82</td>
</tr>
</tbody>
</table>
</section>
<section id="dilution-calculations" class="level3">
<h3 class="anchored" data-anchor-id="dilution-calculations">Dilution Calculations</h3>
<p>Created the 10,000pg/uL stock solution:</p>
<table class="table">
<colgroup>
<col style="width: 19%">
<col style="width: 19%">
<col style="width: 19%">
<col style="width: 19%">
<col style="width: 23%">
</colgroup>
<thead>
<tr class="header">
<th>Concentration<sub>initial</sub>(ng/uL)</th>
<th>Volume<sub>initial</sub>(uL)</th>
<th>Concentration<sub>final</sub>(ng/uL)</th>
<th>Volume<sub>final</sub>(uL)</th>
<th>Volume H<sub>2</sub>O to reach Volume<sub>final</sub></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>12.31333333</td>
<td>9</td>
<td>10</td>
<td>11.082</td>
<td>2.082</td>
</tr>
</tbody>
</table>
<p>10-fold serial dilutions were created, down to 10pg/uL, using 2uL from each previous “stock” in 18uL of H<sub>2</sub>O.</p>
</section>
</section>
<section id="qpcrs" class="level2">
<h2 class="anchored" data-anchor-id="qpcrs">qPCRs</h2>
<p>All qPCRs were run in triplicate for each dilution (1000pg, 100pg, 10pg), with SsoAdvanced Universal SYBR Green Supermix in 20uL reactions. Each primer was utilized with an initial “working stock” concentration of 10uM and at a final concentration of 0.25uM in each qPCR reaction. See the <a href="#qpcr-report-(pdf)">qPCR Report</a> for cycling parameters.</p>
<section id="qpcr-calculations-are-here" class="level3">
<h3 class="anchored" data-anchor-id="qpcr-calculations-are-here">qPCR calculations are here:</h3>
<ul>
<li><a href="https://docs.google.com/spreadsheets/d/1ISb1ddusjLLSjdh3rafKh9rHuM7nukk2kYJmlkSaBDY/edit?usp=sharing"><code>20231119-qPCR_calcs</code></a> (Google Sheet)</li>
</ul>
</section>
</section>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<section id="output-files" class="level2">
<h2 class="anchored" data-anchor-id="output-files">Output files</h2>
<section id="raw-qpcr-data-.pcrd-requires-cfx-maestro" class="level3">
<h3 class="anchored" data-anchor-id="raw-qpcr-data-.pcrd-requires-cfx-maestro">Raw qPCR data (<code>.pcrd</code>; Requires CFX Maestro):</h3>
<ul>
<li><p><a href="../../../data/qPCR/testing/raw/sam_2023-11-19-08-35-30_Connect.pcrd"><code>sam_2023-11-19-08-35-30_Connect.pcrd)</code></a></p>
<ul>
<li>“Analysis Mode” was set to “Target” (“Fluorophore” is the default.)</li>
</ul></li>
</ul>
</section>
<section id="qpcr-data-csv" class="level3">
<h3 class="anchored" data-anchor-id="qpcr-data-csv">qPCR data (CSV):</h3>
<ul>
<li><a href="../../../data/qPCR/testing/exported/sam_2023-11-19_08-35-30_Connect-Quantification-Cq-Results.csv"><code>sam_2023-11-19_08-35-30_Connect-Quantification-Cq-Results.csv</code></a></li>
</ul>
</section>
<section id="qpcr-report-pdf" class="level3">
<h3 class="anchored" data-anchor-id="qpcr-report-pdf">qPCR Report (PDF):</h3>
<ul>
<li><a href="../../../data/qPCR/testing/cfx_reports/sam_2023-11-19_08-35-30_Connect.pdf"><code>sam_2023-11-19_08-35-30_Connect.pdf</code></a></li>
</ul>
</section>
</section>
<section id="cact-amplification" class="level2">
<h2 class="anchored" data-anchor-id="cact-amplification">CAct Amplification</h2>
<table class="table">
<colgroup>
<col style="width: 59%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th>Amplification Plot</th>
<th>Melt Plot</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><img src="../../../data/qPCR/testing/exported/sam_2023-11-19-08-35-30-CAct-Amplification_plot.png" class="img-fluid" alt="CAct Amplification plot showing a single sample amplification of 100pg input DNA at Cq ~= 39"></td>
<td><img src="../../../data/qPCR/testing/exported/sam_2023-11-19-08-35-30-CAct-Melt_plot.png" class="img-fluid" alt="CAct melt plot showing a single melt curve"></td>
</tr>
</tbody>
</table>
<p>Here we see a single sample amplifying, which corresponds to 100pg of input DNA. It’s odd there’s no amplification in any of the 1000pg samples, considering we got late amplification in one of the 100pg samples… Will have to re-run. Possibly will order fresh primer stocks.</p>
</section>
<section id="dact-amplification" class="level2">
<h2 class="anchored" data-anchor-id="dact-amplification">DAct Amplification</h2>
<table class="table">
<colgroup>
<col style="width: 53%">
<col style="width: 46%">
</colgroup>
<thead>
<tr class="header">
<th>Amplification Plot</th>
<th>Melt Plot</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><img src="../../../data/qPCR/testing/exported/sam_2023-11-19-08-35-30-DAct-Amplification_plot.png" class="img-fluid" alt="DAct Amplification plot showing sample amplification of 1000pg (yellow lines) and 100pg (pink lines) of input DNA"></td>
<td><img src="../../../data/qPCR/testing/exported/sam_2023-11-19-08-35-30-DAct-Melt_plot.png" class="img-fluid" alt="DAct melt plot showing melt curves of 1000pg (yellow lines) and 100pg (pink lines) of input DNA"></td>
</tr>
</tbody>
</table>
<p>We see all three reps of 1000pg DNA amplifying (yellow lines) and two of the three 100pg reps amplifying (pink lines). No amplification with 10pg of input DNA. Melt curves look good.</p>
</section>
<section id="mcap_paxc-amplification" class="level2">
<h2 class="anchored" data-anchor-id="mcap_paxc-amplification">Mcap_PaxC Amplification</h2>
<table class="table">
<colgroup>
<col style="width: 75%">
<col style="width: 24%">
</colgroup>
<thead>
<tr class="header">
<th>Amplification Plot</th>
<th>Melt Plot</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><img src="../../../data/qPCR/testing/exported/sam_2023-11-19-08-35-30-Mcap_PaxC-Amplification_plot.png" class="img-fluid" alt="Mcap_PaxC Amplification plot showing sample amplification of 1000pg (yellow lines) and 100pg (pink lines) of input DNA"></td>
<td><img src="../../../data/qPCR/testing/exported/sam_2023-11-19-08-35-30-Mcap_PaxC-Melt_plot.png" class="img-fluid" alt="Mcap_paxC melt plot showing melt curves of 1000pg (yellow lines) and 100pg (pink lines) of input DNA"></td>
</tr>
</tbody>
</table>
<p>We see all three reps of 1000pg DNA amplifying (yellow lines) and all three 100pg reps amplifying (pink lines). No amplification with 10pg of input DNA. Melt curves look good.</p>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">SUMMARY</h2>
<p>DAct and Mcap_PaxC primers appear to work well and produce amplification at 1000pg and 100pg.</p>
<p>CAct primer set only amplified a single sample at 100pg. Will need to repeat this, but will plan on ordering a fresh primer set to ensure that issues aren’t due to age.</p>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-cunning2012" class="csl-entry" role="listitem">
Cunning, Ross, and Andrew C. Baker. 2012. <span>“Excess Algal Symbionts Increase the Susceptibility of Reef Corals to Bleaching.”</span> <em>Nature Climate Change</em> 3 (3): 259–62. <a href="https://doi.org/10.1038/nclimate1711">https://doi.org/10.1038/nclimate1711</a>.
</div>
<div id="ref-cunning2016a" class="csl-entry" role="listitem">
Cunning, R, R Ritson-Williams, and RD Gates. 2016. <span>“Patterns of Bleaching and Recovery of Montipora Capitata in K<span>ā</span>ne<span>‘</span>ohe Bay, Hawai<span>‘</span>i, USA.”</span> <em>Marine Ecology Progress Series</em> 551 (June): 131–39. <a href="https://doi.org/10.3354/meps11733">https://doi.org/10.3354/meps11733</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>